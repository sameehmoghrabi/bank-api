(function(){"use strict";var t={9626:function(t,e,a){var n=a(144),s=a(998),r=a(5716),o=a(5495),i=a(3059),c=a(3687),u=function(){var t=this,e=t._self._c;return e(s.Z,[e(r.Z,{attrs:{app:"",color:"primary",dark:""}},[e("div",{staticClass:"d-flex align-center"},[e(o.Z,{staticClass:"shrink mr-2",attrs:{alt:"Capgemini Logo",contain:"",src:"https://prod.ucwe.capgemini.com/wp-content/themes/capgemini2020/assets/images/logo-white.svg",transition:"scale-transition",width:"200"}})],1),e(c.Z),e("span",{staticClass:"mr-2"},[t._v("Bank Application")])],1),e(i.Z,[e("Customer-Table")],1)],1)},l=[],d=a(5047),p=a(9223),m=a(5372),f=a(6313),h=a(7953),v=function(){var t=this,e=t._self._c;return e("div",[e(d.Z,{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{"item-key":"id",headers:t.customersHeaders,items:t.customers,"single-expand":!0,page:t.page,"items-per-page":t.itemsPerPage,expanded:t.expanded,"show-expand":"","hide-default-footer":""},on:{"update:page":function(e){t.page=e},"update:expanded":function(e){t.expanded=e},"click:row":t.rowClicked,"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"top",fn:function(){return[e(f.Z,{attrs:{flat:""}},[e(h.qW,[t._v("Customers")]),e(p.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(c.Z)],1)]},proxy:!0},{key:"expanded-item",fn:function({headers:a,item:n}){return[e("AccountTable",{key:n.id,attrs:{colspan:a.length,accounts:n.accounts,"customer-id":n.id},on:{"update-customer":t.updateCustomer}})]}}])}),e("div",{staticClass:"text-center pt-2"},[e(m.Z,{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)},g=[],x=a(9204),b=a(8433);const C="/v1/customers";class Z{async getCustomers(){return await b.Z.get(C)}async getCustomer(t){return await b.Z.get(C+"/"+t)}}var w=new Z,y=a(6190),k=a(9582),_=a(4886),I=a(266),T=a(2118),O=a(9930),S=a(1713),A=a(9780),P=function(){var t=this,e=t._self._c;return e("td",{staticClass:"account-table"},[e(d.Z,{staticClass:"elevation-1",attrs:{id:"accountsT",headers:t.accountHeaders,items:t.accounts,"single-expand":!0,"item-key":"id","show-expand":"",expanded:t.expanded,"hide-default-footer":!0},on:{"update:expanded":function(e){t.expanded=e},"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[e(f.Z,{attrs:{flat:"",dense:""}},[e(h.qW,[t._v("Accounts")]),e(p.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(c.Z),e(O.Z,{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:n}){return[e(y.Z,t._g(t._b({attrs:{color:"primary",dark:"",small:""}},"v-btn",n,!1),a),[t._v(" New Account ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(k.Z,[e(_.EB,[e("span",{staticClass:"text-h5"},[t._v("New Account")])]),e(_.ZB,[e(T.Z,[e(S.Z,[e(I.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[e(A.Z,{attrs:{type:"number",label:"Customer ID"},model:{value:t.newItem.customerId,callback:function(e){t.$set(t.newItem,"customerId",e)},expression:"newItem.customerId"}})],1),e(I.Z,{attrs:{cols:"12",sm:"6",md:"4"}},[e(A.Z,{attrs:{type:"number",label:"Initial Credit"},model:{value:t.newItem.initialCredit,callback:function(e){t.$set(t.newItem,"initialCredit",e)},expression:"newItem.initialCredit"}})],1)],1),t.error?e(S.Z,{staticStyle:{color:"red"}},[t._v(" "+t._s(t.errorMessage))]):t._e()],1)],1),e(_.h7,[e(c.Z),e(y.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),e(y.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"expanded-item",fn:function({headers:t,item:a}){return[e("TransactionTable",{key:a.id,attrs:{colspan:t.length,transactions:a.transactions}})]}}])})],1)},j=[];const E="/v1/accounts";class H{async createAccount(t){return await b.Z.post(E+"/add",t).then((t=>t)).catch((function(t){console.log(t)}))}}var M=new H,W=function(){var t=this,e=t._self._c;return e("td",{staticClass:"account-table"},[e(d.Z,{staticClass:"elevation-1",staticStyle:{cursor:"default"},attrs:{id:"transactionsT",headers:t.transactionsHeaders,items:t.transactions,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(f.Z,{attrs:{flat:"",dense:""}},[e(h.qW,[t._v("Transactions")]),e(p.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e(c.Z)],1)]},proxy:!0}])})],1)},$=[],B={name:"TransactionTable",data:()=>({transactionsHeaders:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"Amount",align:"start",sortable:!0,value:"amount"}]}),props:{transactions:[]},methods:{},created(){}},D=B,N=a(1001),q=(0,N.Z)(D,W,$,!1,null,null,null),F=q.exports,L={name:"AccountTable",components:{TransactionTable:F},data:()=>({error:!1,errorMessage:"Account creation failed!",dialog:!1,expanded:[],accountHeaders:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"Balance",align:"start",sortable:!0,value:"balance"},{text:"",value:"data-table-expand"}],newItem:{customerId:"",initialCredit:0},defaultItem:{customerId:0,initialCredit:0}}),watch:{dialog(t){t||this.close()}},props:{accounts:[],customerId:{type:Number,default:0}},created(){this.defaultItem.customerId=this.customerId,this.newItem.customerId=this.customerId},methods:{rowClicked(t,e){e.isExpanded?this.expanded=[]:this.expanded=[t]},close(){this.dialog=!1,this.$nextTick((()=>{this.newItem=Object.assign({},this.defaultItem),this.error=!1}))},save(){M.createAccount(this.newItem).then((t=>{t&&t.status==x.WE.Created?(this.$emit("update-customer",this.customerId),this.close()):this.error=!0}))}}},z=L,G=(0,N.Z)(z,P,j,!1,null,null,null),J=G.exports,K={name:"CustomerTable",components:{AccountTable:J},data:()=>({page:1,pageCount:0,itemsPerPage:10,customers:[],expanded:[],customersHeaders:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Surname",align:"start",sortable:!0,value:"surname"},{text:"",value:"data-table-expand"}]}),methods:{getCustomers(){w.getCustomers().then((t=>{this.customers=t.data}))},updateCustomer(t){w.getCustomer(t).then((e=>{if(e&&e.status==x.WE.Ok){var a=this.customers.findIndex((e=>e.id==t));a>-1&&this.customers.splice(a,1,e.data)}}))},rowClicked(t,e){e.isExpanded?this.expanded=[]:this.expanded=[t]}},created(){this.getCustomers()}},Q=K,R=(0,N.Z)(Q,v,g,!1,null,null,null),U=R.exports,V={name:"App",components:{CustomerTable:U},data:()=>({})},X=V,Y=(0,N.Z)(X,u,l,!1,null,null,null),tt=Y.exports,et=a(1705);n.ZP.use(et.Z);var at=new et.Z({});n.ZP.config.productionTip=!1,new n.ZP({vuetify:at,render:t=>t(tt)}).$mount("#app")}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,n,s,r){if(!n){var o=1/0;for(l=0;l<t.length;l++){n=t[l][0],s=t[l][1],r=t[l][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(i=!1,r<o&&(o=r));if(i){t.splice(l--,1);var u=s();void 0!==u&&(e=u)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[n,s,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,r,o=n[0],i=n[1],c=n[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(c)var l=c(a)}for(e&&e(n);u<o.length;u++)r=o[u],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(l)},n=self["webpackChunkbank_fe"]=self["webpackChunkbank_fe"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9626)}));n=a.O(n)})();
//# sourceMappingURL=app.eb77e43c.js.map